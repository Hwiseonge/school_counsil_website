<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>QnA - ìì¹˜íšŒì—ê²Œ ë§í•´ì¤˜</title>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    textarea { width: 100%; height: 100px; margin-top: 10px; }
    .qna-section { margin-bottom: 40px; }
    .qna-box { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 8px; }
    .admin-form textarea { height: 60px; }
    .btn { margin-top: 10px; }
    form { margin-top: 10px; }
    .answer-meta { font-size: 14px; color: gray; }
    a.back { display:inline-block; margin-top:20px; text-decoration: none; color: #333; }
  </style>
</head>
<body>
  <h1>ğŸ’¬ ìì¹˜íšŒì—ê²Œ ë§í•´ì¤˜</h1>

  {% if role == 'student' %}
    <div class="qna-section">
      <h3>ğŸ™‹ ì§ˆë¬¸ ë“±ë¡</h3>
      <form method="POST">
        <textarea name="question" placeholder="ììœ ë¡­ê²Œ ì§ˆë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”." required></textarea>
        <br>
        <button type="submit" class="btn">ì§ˆë¬¸ ë“±ë¡</button>
      </form>
      <a href="/" class="back">â¬… ë’¤ë¡œ ê°€ê¸°</a>
    </div>
  {% endif %}

  {% if role == 'admin' %}
    <a href="/" class="back">â¬… ë’¤ë¡œ ê°€ê¸°</a>
  {% endif %}

  {% if unanswered %}
    <div class="qna-section">
      <h2>ğŸ“Œ ë‹µë³€ ëŒ€ê¸° ì§ˆë¬¸</h2>
      {% for q in unanswered %}
        <div class="qna-box">
          <p><strong>ì§ˆë¬¸:</strong> {{ q.question }}</p>
          {% if role == 'admin' %}
            <form method="POST" action="/answer/{{ loop.index0 }}" class="admin-form">
              <textarea name="answer" placeholder="ë‹µë³€ ì‘ì„±"></textarea><br>
              <label>
                ë‹µë³€ ì£¼ì²´:
                <select name="answered_by">
                  <option value="í•™ìƒìì¹˜íšŒ" style="color:blue">í•™ìƒìì¹˜íšŒ</option>
                  <option value="ì´ë¬´ê¸°íšë¶€">ì´ë¬´ê¸°íšë¶€ğŸ§¾</option>
                  <option value="í•™ìŠµìƒë‹´ë¶€">í•™ìŠµìƒë‹´ë¶€ğŸ—¨ï¸</option>
                  <option value="ìƒí™œì•ˆì „ë¶€">ìƒí™œì•ˆì „ë¶€</option>
                  <option value="í™˜ê²½ë´‰ì‚¬ë¶€">í™˜ê²½ë´‰ì‚¬ë¶€</option>
                  <option value="ë¬¸í™”ì˜ˆìˆ ë¶€">ë¬¸í™”ì˜ˆìˆ ë¶€</option>
                  <option value="ìì¹˜í™ë³´ë¶€">ìì¹˜í™ë³´ë¶€</option>
                  <option value="ì²´ìœ¡ê±´ê°•ë¶€">ì²´ìœ¡ê±´ê°•ë¶€</option>
                  <option value="í•™ìƒë³µì§€ë¶€">í•™ìƒë³µì§€ë¶€</option>
                  <option value="í•™ìƒíšŒì¥">í•™ìƒíšŒì¥</option>
                  <option value="í•™ìƒë¶€íšŒì¥">í•™ìƒë¶€íšŒì¥</option>
                  
                </select>
              </label><br>
              <button type="submit" class="btn">ë‹µë³€ ë“±ë¡</button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if answered %}
    <div class="qna-section">
      <h2>âœ… ë‹µë³€ ì™„ë£Œ</h2>
      {% for q in answered %}
        <div class="qna-box">
          <p><strong>ì§ˆë¬¸:</strong> {{ q.question }}</p>
          <p><strong>ë‹µë³€:</strong> {{ q.answer }}</p>
          <p class="answer-meta" style="color:grey">ë‹µë³€ì: {{ q.answered_by }}</p>
          {% if role == 'admin' %}
            <form method="POST" action="/delete/{{ loop.index0 }}" onsubmit="return confirm('ì •ë§ë¡œ ì´ ì§ˆë¬¸ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
              <button type="submit" class="btn">ì‚­ì œ</button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}
</body>
</html>
