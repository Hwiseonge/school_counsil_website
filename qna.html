<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>QnA - ìì¹˜íšŒì—ê²Œ ë§í•´ì¤˜</title>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    textarea { width: 100%; height: 100px; margin-top: 10px; }
    .qna-section { margin-bottom: 40px; }
    .qna-box { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 8px; }
    .admin-form textarea { height: 60px; }
    .btn { margin-top: 10px; }
    form { margin-top: 10px; }
    .answer-meta { font-size: 14px; color: gray; }
    a.back { display:inline-block; margin-top:20px; text-decoration: none; color: #333; }
    .qna-container { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ğŸ’¬ ìì¹˜íšŒì—ê²Œ ë§í•´ì¤˜</h1>

  {% if role == 'student' %}
    <div class="qna-section">
      <h3>ğŸ™‹ ì§ˆë¬¸ ë“±ë¡</h3>
      <form method="POST" onsubmit="return confirm('ì •ë§ë¡œ ì´ ì§ˆë¬¸ì„ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
        <textarea name="question" placeholder="ììœ ë¡­ê²Œ ì§ˆë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”." required></textarea>
        <br>
        <input type="submit" class="btn" value="ì§ˆë¬¸ ë“±ë¡">
      </form>
      <a href="/" class="back">â¬… ë’¤ë¡œ ê°€ê¸°</a>
    </div>
  {% endif %}

  {% if role == 'admin' %}
    <a href="/" class="back">â¬… ë’¤ë¡œ ê°€ê¸°</a>
  {% endif %}

  <div class="qna-container">
    {% if unanswered %}
      <div class="qna-section">
        <h2>ğŸ“Œ ë‹µë³€ ëŒ€ê¸° ì§ˆë¬¸</h2>
        <div style="overflow-y: scroll; height: 500px;">
          {% for q in unanswered %}
            <div class="qna-box">
              <p><strong>ì§ˆë¬¸:</strong> {{ q.question }}</p>

              {% if role == 'admin' %}
                <form method="POST" action="/answer/{{ q.id }}" class="admin-form">
                  <textarea name="answer" placeholder="ë‹µë³€ ì‘ì„±" required></textarea><br>
                  <label>
                    ë‹µë³€ ì£¼ì²´:
                    <select name="answered_by" required>
                      <option value="í•™ìƒìì¹˜íšŒ ğŸ¤">í•™ìƒìì¹˜íšŒ ğŸ¤</option>
                      <option value="ì´ë¬´ê¸°íšë¶€ğŸ§¾">ì´ë¬´ê¸°íšë¶€ğŸ§¾</option>
                      <option value="í•™ìŠµìƒë‹´ë¶€ğŸ—¨ï¸">í•™ìŠµìƒë‹´ë¶€ğŸ—¨ï¸</option>
                      <option value="ìƒí™œì•ˆì „ë¶€ ğŸ›¡ï¸">ìƒí™œì•ˆì „ë¶€ ğŸ›¡ï¸</option>
                      <option value="í™˜ê²½ë´‰ì‚¬ë¶€ ğŸŒ±">í™˜ê²½ë´‰ì‚¬ë¶€ ğŸŒ±</option>
                      <option value="ë¬¸í™”ì˜ˆìˆ ë¶€ ğŸ­">ë¬¸í™”ì˜ˆìˆ ë¶€ ğŸ­</option>
                      <option value="ìì¹˜í™ë³´ë¶€ ğŸ“£">ìì¹˜í™ë³´ë¶€ ğŸ“£</option>
                      <option value="ì²´ìœ¡ê±´ê°•ë¶€ ğŸ¾">ì²´ìœ¡ê±´ê°•ë¶€ ğŸ¾</option>
                      <option value="í•™ìƒë³µì§€ë¶€ ğŸ¥">í•™ìƒë³µì§€ë¶€ ğŸ¥</option>
                      <option value="í•™ìƒíšŒì¥ ğŸ†">í•™ìƒíšŒì¥ ğŸ†</option>
                      <option value="í•™ìƒë¶€íšŒì¥ ğŸ–ï¸">í•™ìƒë¶€íšŒì¥ ğŸ–ï¸</option>
                    </select>
                  </label><br>
                  <button type="submit" class="btn">ë‹µë³€ ë“±ë¡</button>
                </form>

                <form method="POST" action="/delete/{{ q.id }}" onsubmit="return confirm('ì •ë§ë¡œ ì´ ì§ˆë¬¸ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                  <button type="submit" class="btn">ì‚­ì œ</button>
                </form>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if answered %}
      <h2>âœ… ë‹µë³€ ì™„ë£Œ</h2>
      <div style="overflow-y: scroll; height: 500px;">
        <div class="qna-section">
          {% for q in answered %}
            <div class="qna-box">
              <p><strong>ì§ˆë¬¸:</strong> {{ q.question }}</p>
              <p><strong>ë‹µë³€:</strong> {{ q.answer }}</p>
              <p class="answer-meta">ë‹µë³€ì: {{ q.answered_by }}</p>

              {% if role == 'admin' %}
                <form method="POST" action="/delete/{{ q.id }}" onsubmit="return confirm('ì •ë§ë¡œ ì´ ì§ˆë¬¸ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                  <button type="submit" class="btn">ì‚­ì œ</button>
                </form>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
  </div>
</body>
</html>
