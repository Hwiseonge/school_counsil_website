<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì œ80ëŒ€ í•™ìƒìì¹˜íšŒ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='school.css') }}">
</head>
<body>

<header class="top-header">
  <div class="logo-area">ì›ì£¼ì—¬ìê³ ë“±í•™êµ</div>

  <div class="login-form">
    {% if session.get("username") %}
      <p>ê´€ë¦¬ìë‹˜, í™˜ì˜í•©ë‹ˆë‹¤. <a href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a></p>
    {% else %}
      <form method="POST" action="{{ url_for('login') }}">
        <input type="text" name="username" placeholder="ì•„ì´ë””" required>
        <input type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
        <button type="submit">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
      </form>
    {% endif %}
  </div>
</header>

<nav>
  <a href="/qna">QnA ì§ˆë¬¸í•˜ëŸ¬ ê°€ê¸°</a>
  <a href="#">í•™êµ ì†Œê°œ</a>
</nav>

<section class="title-banner">
  <div class="slider-wrapper">
    <div class="slider">
      <div class="slide">ì œ 80ëŒ€ í•™ìƒìì¹˜íšŒ</div>
      <div class="slide">ëª¨ë‘ê°€ í•¨ê»˜ ë§Œë“œëŠ” í•™êµ</div>
      <div class="slide">ì›ì£¼ì—¬ê³  í•™ìƒë“¤ì˜ ëª©ì†Œë¦¬</div>
    </div>
  </div>
</section>

<section class="main-cards">

  <div id="news">
    <h3 style="text-align:center;">ìì¹˜íšŒ ì†Œì‹</h3>
    {% if images.news %}
      <img src="{{ url_for('static', filename='uploads/' + images.news) }}" alt="ìì¹˜íšŒ ì†Œì‹ ì‚¬ì§„" style="max-width:100%;">
    {% endif %}
    <!-- <div class="card">ìì¹˜íšŒ ì†Œì‹</div> -->

    {% if role == "admin" %}
      <button onclick="toggleUploadForm('news')">ì‚¬ì§„ ì˜¬ë¦¬ê¸°</button>
      <form id="upload_news" class="upload-form" method="POST" action="{{ url_for('upload_image') }}" enctype="multipart/form-data" style="display:none;">
        <input type="hidden" name="section" value="news">
        <input type="file" name="image" accept="image/*" required>
        <button type="submit">ì—…ë¡œë“œ</button>
      </form>
    {% endif %}
  </div>

  <div id="schedule">
    <h3 style="text-align:center;">í–‰ì‚¬ ì¼ì •</h3>
    {% if images.schedule %}
      <img src="{{ url_for('static', filename='uploads/' + images.schedule) }}" alt="í–‰ì‚¬ ì¼ì • ì‚¬ì§„" style="max-width:100%;">
    {% endif %}
    <!-- <div class="card">í–‰ì‚¬ ì¼ì •</div> -->

    {% if role == "admin" %}
      <button onclick="toggleUploadForm('schedule')">ì‚¬ì§„ ì˜¬ë¦¬ê¸°</button>
      <form id="upload_schedule" class="upload-form" method="POST" action="{{ url_for('upload_image') }}" enctype="multipart/form-data" style="display:none;">
        <input type="hidden" name="section" value="schedule">
        <input type="file" name="image" accept="image/*" required>
        <button type="submit">ì—…ë¡œë“œ</button>
      </form>
    {% endif %}
  </div>

  <div id="intro">
    <h3 style="text-align:center;">ìì¹˜íšŒ ì†Œê°œ</h3>
    {% if images.intro %}
      <img src="{{ url_for('static', filename='uploads/' + images.intro) }}" alt="ìì¹˜íšŒ ì†Œê°œ ì‚¬ì§„" style="max-width:100%;">
    {% endif %}
    <!-- <div class="card">ìì¹˜íšŒ ì†Œê°œ</div> -->

    {% if role == "admin" %}
      <button onclick="toggleUploadForm('intro')">ì‚¬ì§„ ì˜¬ë¦¬ê¸°</button>
      <form id="upload_intro" class="upload-form" method="POST" action="{{ url_for('upload_image') }}" enctype="multipart/form-data" style="display:none;">
        <input type="hidden" name="section" value="intro">
        <input type="file" name="image" accept="image/*" required>
        <button type="submit">ì—…ë¡œë“œ</button>
      </form>
    {% endif %}
  </div>

  <div id="mascot">
    <h3 style="text-align:center;">ë§ˆìŠ¤ì½”íŠ¸</h3>
    {% if images.mascot %}
      <img src="{{ url_for('static', filename='uploads/' + images.mascot) }}" alt="ë§ˆìŠ¤ì½”íŠ¸ ì‚¬ì§„" style="max-width:100%;">
    {% endif %}
    <!-- <div class="card">ë§ˆìŠ¤ì½”íŠ¸</div> -->

    {% if role == "admin" %}
      <button onclick="toggleUploadForm('mascot')">ì‚¬ì§„ ì˜¬ë¦¬ê¸°</button>
      <form id="upload_mascot" class="upload-form" method="POST" action="{{ url_for('upload_image') }}" enctype="multipart/form-data" style="display:none;">
        <input type="hidden" name="section" value="mascot">
        <input type="file" name="image" accept="image/*" required>
        <button type="submit">ì—…ë¡œë“œ</button>
      </form>
    {% endif %}
  </div>

</section>

<section class="event-video">
  <div class="event">
    <h2>ì´ë²ˆ ë‹¬ í–‰ì‚¬</h2>
    <div class="event-img">[í–‰ì‚¬ ì´ë¯¸ì§€]</div>
  </div>
  <div class="video">
    <h2>ì†Œê°œ ì˜ìƒ</h2>
    <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>
  </div>
</section>

<section class="opinion-section">
  <h2>ğŸ“Œ ìì¹˜íšŒì—ê²Œ ë§í•´ì¤˜</h2>
  <div id="swered-box" style="overflow-y: scroll; height: 500px;">
    {% if answered_qna %}
      {% for q in answered_qna %}
        <div class="qna-box">
          <p><strong>ì§ˆë¬¸ :</strong> {{ q.question }}</p>
          <p><strong>{{ q.answered_by }}:</strong> {{ q.answer }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p>ì•„ì§ ë‹µë³€ëœ ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </div>
</section>

<script>
function toggleUploadForm(section) {
  const form = document.getElementById('upload_' + section);
  if (form.style.display === "none") {
    form.style.display = "block";
  } else {
    form.style.display = "none";
  }
}
</script>
</body>
</html>
